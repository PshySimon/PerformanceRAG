# ES搜索Pipeline配置
components:
  es_retriever:
    type: "retriever"
    name: "elasticsearch"
    config:
      index_name: "vector_performance_docs"
      host: "localhost"
      port: 9200
      username: "elastic"
      password: "sPxLec=NGSFmUT_7+74R"
      use_ssl: true
      verify_certs: false
      search_type: "hybrid"  # text, vector, hybrid
      embedding:
        type: "openai"
        model: "./models/bge-m3"
        api_key: "123456"
        api_base: "http://workspace.featurize.cn:11018/v1"
        batch_size: 10
        timeout: 30
      debug: true
  
  openai_reranker:
    type: "reranker"
    name: "openai"
    config:
      api_key: "123456"
      base_url: "http://workspace.featurize.cn:26356/v1"
      model: "./models/bge-reranker-v2-m3"
      top_k: 5
      debug: true
  
  openai_generator:
    type: "generator"
    name: "llm"

# 流程定义
flow:
  es_retriever: ["openai_reranker"]
  openai_reranker: ["openai_generator"]
  openai_generator: []

# 入口点
entry_points:
  search: "es_retriever"